<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linktree with Password Protection</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container d-flex justify-content-center align-items-center vh-100">
        <div class="text-center">
            <div id="login" class="card p-4">
                <div class="card-body">
                    <h5 class="card-title">Login</h5>
                    <form autocomplete="off">
                        <div class="form-group">
                            <input type="password" class="form-control" id="password" placeholder="Enter Password" autocomplete="off">
                        </div>
                        <button class="btn btn-primary btn-block" type="submit">Submit</button>
                        <p id="error-message" class="text-danger mt-2"></p>
                    </form>
                </div>
            </div>
            <div id="links" class="card shadow p-4" style="display: none;">
                <div class="card-body"  style="overflow: scroll;">
                    <h5 class="card-title mb-4">Your Links</h5>
                    <div class="text-center">
                        <a href="https://wa.me/your-whatsapp-number" class="btn btn-custom-purple mb-3 mx-2" target="_blank">
                            <i class="fab fa-whatsapp"></i> WhatsApp
                        </a>
                    </div>
                    <div class="text-center">
                        <a href="https://t.me/your-telegram-username" class="btn btn-custom-purple mb-3 mx-2" target="_blank">
                            <i class="fab fa-telegram"></i> Telegram
                        </a>
                    </div>
                    <div class="text-center">
                        <a href="mailto:your-email@example.com" class="btn btn-custom-purple mb-3 mx-2" target="_blank">
                            <i class="fas fa-envelope"></i> Email
                        </a>
                    </div>
                    <div class="text-center">
                        <a href="https://www.youtube.com/user/your-channel" class="btn btn-custom-purple mb-3 mx-2" target="_blank">
                            <i class="fab fa-youtube"></i> YouTube
                        </a>
                    </div>
                    <div class="text-center">
                        <a href="https://docs.google.com/forms/your-form-url" class="btn btn-custom-purple mb-3 mx-2" target="_blank">
                            <i class="fab fa-google"></i> Google Forms
                        </a>
                    </div>
                    <div class="text-center">
                        <a href="https://www.instagram.com/your-instagram-handle" class="btn btn-custom-purple mb-3 mx-2" target="_blank">
                            <i class="fab fa-instagram"></i> Instagram
                        </a>
                    </div>
                    <button id="logout-btn" class="btn btn-outline-danger btn-block mt-4">
                        Logout <i class="fas fa-sign-out-alt ml-2"></i>
                    </button>
                    <h5 style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Feedback Submission</h5>
                    <form target="_blank" action="https://formsubmit.co/028c0178033f578a8d3a6d57b4d06376" method="POST" onsubmit="handleSubmit()">
                        <div class="form-group">
                            <textarea name="message" class="form-control" autocomplete="off"  placeholder="Your Feedback" rows="3" required></textarea>
                            <input type="hidden" name="_next" value="tiny.cc/2428">
                            <input type="hidden" name="_subject" value="New message">
                            <input type="hidden" name="_captcha" value="false">
                        </div>
                        <div class="alert alert-info " role="alert" style="font: 0.75em sans-serif;">
                            Responses take a few minutes to reach our Admin.<br>
                            Abrupt exit will result failure in mail delivery.<br>
                            This site does not have any encryption.<br>
                            Please do not share personal information.
                        </div>
                        <button type="submit" class="btn btn-outline-danger btn-block mt-4">Submit Form</button>
                    
                    <div class="alert alert-info" role="alert" style="margin-top: 2%; font: 0.75em sans-serif;">
                        <p>This Site will expire in 3 minutes.You'll also be logged out <br>if you use any link or submit feedback for sceurity reasons<br>Ensure logging out and clear your browser log after use</p>
                    </div>

                    
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap and jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- Custom JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const correctPassword = '2428';  
            const timeoutDuration = 3 * 60 * 1000; 
            let logoutTimer;
            const loginCard = document.getElementById('login'); 
            const linksCard = document.getElementById('links');  
            const errorMessage = document.getElementById('error-message');
            const loginForm = document.querySelector('#login form');
            const logoutBtn = document.getElementById('logout-btn');
            const links = document.querySelectorAll('#links a');

            loginForm.addEventListener('submit', function(event) {
                event.preventDefault();
                const passwordInput = document.getElementById('password');
                const password = passwordInput.value.trim();  
                
                if (password === '') {
                    errorMessage.innerText = 'Please enter a password';
                    return;
                }

                if (password === correctPassword) {
                    localStorage.setItem('user', 'success');
                    loginCard.style.display = 'none';
                    linksCard.style.display = 'block';
                    errorMessage.innerText = '';  
                    startLogoutTimer();
                } else {
                    errorMessage.innerText = 'Incorrect password. Please retry.';
                    passwordInput.value = ''; 
                    passwordInput.focus(); 
                }
            });

            logoutBtn.addEventListener('click', function(event) {
                event.preventDefault();
                logout();
            });

            links.forEach(link => {
                link.addEventListener('click', function(event) {
                    event.preventDefault();
                    const password = prompt("Please re-enter your password to redirect to the link:");
                    if (password === correctPassword) {
                        window.open(link.href, '_blank');  // Open link in a new tab/window
                        logout();  // Call logout after opening the link
                    } else {
                        logout();  // Call logout if the password is incorrect
                    }
                });
            });

            // Check if the user is logged in on page load
            if (localStorage.getItem('user') === 'success') {
                loginCard.style.display = 'none';
                linksCard.style.display = 'block';
                startLogoutTimer();
            } else {
                loginCard.style.display = 'block';
                linksCard.style.display = 'none';
            }

            function startLogoutTimer() {
                clearTimeout(logoutTimer);
                logoutTimer = setTimeout(logout, timeoutDuration);
            }

            function logout() {
                localStorage.removeItem('user');
                loginCard.style.display = 'block';
                linksCard.style.display = 'none';
                document.getElementById('password').value = '';
                errorMessage.innerText = '';
            }

            window.handleSubmit = function() {
                alert("Upon submission, you will be redirected to our API partners' confirmation page. Please wait until it goes through and safely close/come back to our home page.");
                logout();
            }
        });
    </script>
</body>
</html>
